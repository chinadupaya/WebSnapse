(this.webpackJsonpthesis=this.webpackJsonpthesis||[]).push([[0],{112:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},148:function(e,t,n){},153:function(e,t){},155:function(e,t){},180:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(14),i=n.n(c),s=(n(112),n(67)),l=n(26),u=n(106),d=n(10),j=n.n(d),b=n(19),h=n(8),f=n(38),O=(n(114),n(115),n(97)),p=n(57),g=n(187),x=n(188),v=n(189),m=n(202),y=n(98),w=n(192),S=n(99),k=n(203),N=n(201),C=n(190),E=n(191),R=n(193),M=n(194),I=n(195),T=n(196),J=n(197),_=n(198),D=n(199),L=n(68),A=n(81),H=n.n(A),B=n(17),P=[{selector:".snapse-node, .snapse-output",style:{"font-family":"Computer Modern","background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top",color:"black",content:"data(label)"}},{selector:".snapse-node__rules, .snapse-node__output",style:(r={"font-family":"Computer Modern","font-style":"italic","background-color":"white","border-width":1,events:"no","text-wrap":"wrap","text-halign":"center","text-valign":"center"},Object(B.a)(r,"text-wrap","wrap"),Object(B.a)(r,"content","data(label)"),Object(B.a)(r,"height",150),Object(B.a)(r,"shape","roundrectangle"),Object(B.a)(r,"width",100),r)},{selector:".snapse-node__time, .snapse-node__spike",style:{"font-family":"Computer Modern","background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:"edge",style:{"font-family":"Computer Modern","curve-style":"bezier","target-arrow-shape":"triangle","text-background-color":"white","text-background-shape":"rectangle",width:1}},{selector:".edge--triggering",style:{"line-color":"magenta","line-style":"dashed","target-arrow-color":"magenta",width:3}}],F=n(47),G=n.n(F);var z=function(){var e=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t,n=e.current,r=0;return function e(){r++,n&&n.edges().animate({style:{"line-dash-offset":-r}}),t=requestAnimationFrame(e)}(),function(){t&&cancelAnimationFrame(t)}}),[]),[e,function(t){e.current=t}]},q=function(e,t,n,r,a){return[{data:{rootId:e,id:"".concat(e),label:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},classes:"snapse-output",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-output"),parent:e,label:r},classes:"snapse-node__output",position:{x:t,y:n}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:a},classes:"snapse-node__spike",position:{x:t,y:n+40}}]},K=function(e){var t=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e)||/(a+)(\+*\**)\/(a+)->(0);(0)/.exec(e);return console.log(t),t},U=function(e,t,n){return{data:{id:e+"-"+t,source:e,target:t},classes:n}},W=function(e){for(var t=e.split(" "),n=0,r=0;r<t.length;r++)null!=K(t[r])?n+=1:console.log("invalidRule",t[r]);return n==t.length?1:0},X=n(185),Q=n(1),V=function(e){var t=e.neurons,n=e.onEdgeCreate,r=e.handleChangePosition,o=z(),c=Object(h.a)(o,2),i=c[0],s=c[1];var l=function(e){var t,n,r,a,o,c,i={nodes:[],edges:[]};for(var s in e){var l=e[s];if(l.isOutput){var u=q(l.id,l.position.x,l.position.y,l.bitstring,0);i.nodes.push(u[0]),i.nodes.push(u[1]),i.nodes.push(u[2])}else{var d=(t=l.id,n=l.position.x,r=l.position.y,a=l.rules,o=l.spikes,c=l.delay,[{data:{id:t,label:"".concat(t.includes("-")?t.substr(0,t.indexOf("-")):t)},position:{x:n,y:r},classes:"snapse-node"},{data:{id:t+"-rules",parent:t,label:a.replace(/ /g,"\n")},position:{x:n,y:r},classes:"snapse-node__rules"},{data:{id:t+"-spike",parent:t,label:"".concat(0==o?"\u03bb":o)},position:{x:n,y:r-60},classes:"snapse-node__spike"},{data:{id:t+"-time",parent:t,label:c},position:{x:n,y:r+90},classes:"snapse-node__time"}]);i.nodes.push(d[0]),i.nodes.push(d[1]),i.nodes.push(d[2]),i.nodes.push(d[3])}if(l.out)for(var j=0;j<l.out.length;j++)if(l.delay<0){console.log(l.delay);var b,h=Object(f.a)(l.out);try{for(h.s();!(b=h.n()).done;){b.value;var O=U(l.id,l.out[j]," edge--triggering");i.edges.push(O)}}catch(g){h.e(g)}finally{h.f()}}else{var p=U(l.id,l.out[j],"");i.edges.push(p)}}return i}(t);return Object(a.useEffect)((function(){var e=i.current;e&&(e.on("mouseup",".snapse-node, .snapse-output",(function(e){console.log("change position",e.target.id()),r(e.position,e.target.id())})),e.gridGuide({guidelinesStyle:{strokeStyle:"black",horizontalDistColor:"#ff0000",verticalDistColor:"green",initPosAlignmentColor:"#0000ff"}}),e.edgehandles({handleNodes:".snapse-node",preview:!1,loopAllowed:function(){return!1},edgeType:function(e,t){return"flat"},complete:n}))}),[i]),Object(Q.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(Q.jsxs)(y.a,{className:"center-graph-button",variant:"secondary",onClick:function(){var e=i.current;e&&(e.center(),e.fit(),e.zoom({level:.8,position:{x:100,y:100}}))},children:[Object(Q.jsx)(X.a,{})," ","Center Graph"]}),Object(Q.jsx)(H.a,{cy:s,elements:H.a.normalizeElements(l),style:{width:"100%",height:"100%"},stylesheet:P})]})},Y=n(48),Z=n.n(Y),$=n(39);function ee(e){/(a+)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e);var t=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e),n=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(0);(0)/.exec(e);if(t){var r=Object(h.a)(t,7),a=r[1],o=r[2],c=r[3],i=r[4],s=r[5],l=r[6],u=parseInt(l,10);return[a.length,o.length-2,c,i.length,s.length,u]}if(n){var d=Object(h.a)(n,7),j=d[1],b=d[2],f=d[3],O=d[4];d[5],d[6];return[j.length,b.length-2,f,O.length,0,0]}return!1}function te(e,t,n,r){if("+"==n){if(t>0)return(r-e)%t==0&&r-e>=t;if(r>=e)return!0}else if("*"==n){if(t>0)return(r-e)%t==0;if(r>=e-1)return!0}else if(r==e)return!0;return!1}function ne(e,t,n,r,a){var o=Object($.a)(e,(function(e){var t={},o=[],c={},i=!0;for(var s in e){if(!(C=e[s]).currentRule&&!C.isOutput){delete e[C.id].currentRule;for(var l=C.rules.split(" "),u=[],d=0;d<l.length;d++){var j=ee(l[d]),b=Object(h.a)(j,6),O=b[0],p=b[1],g=b[2],x=b[3],v=b[4],m=b[5];te(O,p,g,C.spikes)&&(u.push(l[d]),i=!1)}if(1==u.length){e[C.id].currentRule=u[0],e[C.id].chosenRule=u[0];var y=ee(u[0]),w=Object(h.a)(y,6);O=w[0],p=w[1],g=w[2],x=w[3],v=w[4],m=w[5];e[C.id].delay=m}else if(1==n&&u.length>1){var S=Math.floor(Math.random()*u.length),k=ee(u[S]),N=Object(h.a)(k,6);O=N[0],p=N[1],g=N[2],x=N[3],v=N[4],m=N[5];e[C.id].currentRule=u[S],e[C.id].chosenRule=u[S],e[C.id].delay=m}else 0==n&&u.length>1&&(c[C.id]=u)}}if(Object.keys(c).length>0)r(c);else{for(var s in e){var C;if((C=e[s]).currentRule){if(i=!1,C.delay>=0){var E=C.delay.valueOf();E--,e[C.id].delay=E}if(console.log(C.delay),C.delay<0){var R=ee(C.currentRule),M=Object(h.a)(R,6),I=(O=M[0],p=M[1],g=M[2],x=M[3],v=M[4],m=M[5],C.spikes.valueOf());I-=x,e[C.id].spikes=I;var T,J=C.out,_=Object(f.a)(J);try{for(_.s();!(T=_.n()).done;){var D=T.value;t[D]=D in t?t[D]+v:v}}catch(B){_.e(B)}finally{_.f()}delete e[C.id].currentRule}}else C.isOutput?(o.push(C.id),s in t||(t[s]=0)):-1==C.delay&&(e[C.id].delay=0)}for(var L in t){var A=e[L].spikes.valueOf();if(A+=t[L],e[L].spikes=A,e[L].isOutput){var H="".concat(e[L].bitstring).concat(t[L]||"0");e[L].bitstring=H}}i&&a()}}));return localStorage.setItem(t+"sec",JSON.stringify(o)),o}function re(e){return console.log("back step automata"),JSON.parse(localStorage.getItem(e+"sec"))}var ae,oe,ce,ie=n(200),se=function(e){var t=e.showChooseRuleModal,n=e.handleCloseChooseRuleModal,r=e.rules,o=e.handleChosenRules,c=Object(p.a)({}),i=Object(h.a)(c,2),s=i[0],l=i[1];function u(e,t){l((function(n){for(var r in n)r==t&&(n[r]=e.target.value)}))}Object(a.useEffect)((function(){l((function(e){for(var t in r)e[t]=r[t][0]}))}),[r]);for(var d=function(e,t){var n=t.map((function(e){return Object(Q.jsx)("option",{value:e,children:e},e)}));return Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:e}),Object(Q.jsx)(m.a.Control,{as:"select",value:s[e],onChange:function(t){return u(t,e)},children:n})]})},j=Object.keys(r),b=[],f=0;f<j.length;f++)console.log(f),b.push(d(j[f],r[j[f]]));return Object(Q.jsxs)(ie.a,{show:t,onHide:n,backdrop:"static",keyboard:!1,children:[Object(Q.jsx)(ie.a.Header,{children:Object(Q.jsx)(ie.a.Title,{children:"Choose Rule Form"})}),Object(Q.jsx)(ie.a.Body,{children:Object(Q.jsxs)(m.a,{onSubmit:function(e){e.preventDefault(),o(s)},children:[b,Object(Q.jsx)(y.a,{type:"submit",children:"Submit"})]})})]})},le=function(e,t){return t.reset?{id:"",startingSpikes:0,rules:""}:Object(l.a)(Object(l.a)({},e),{},Object(B.a)({},t.name,t.value))},ue={id:"",rules:"",startingSpikes:0},de=function(e){var t=e.showNewNodeModal,n=e.handleCloseModal,r=e.handleNewNode,o=e.handleError,c=function(){n()},i=Object(a.useReducer)(le,ue),s=Object(h.a)(i,2),l=s[0],u=s[1],d=Object(a.useState)(!1),j=Object(h.a)(d,2),b=(j[0],j[1]),f=function(e){console.log(e.target.value),console.log(e.target.name),u({name:e.target.name,value:e.target.value})};return Object(Q.jsxs)(ie.a,{show:t,onHide:c,children:[Object(Q.jsx)(ie.a.Header,{closeButton:!0,children:Object(Q.jsx)(ie.a.Title,{children:"Create New Node"})}),Object(Q.jsx)(ie.a.Body,{children:Object(Q.jsxs)(m.a,{onSubmit:function(e){e.preventDefault();var t="".concat(l.id,"-").concat(Z.a.generate());if(W(l.rules)){console.log("All rules valid"),c(),b(!0),setTimeout((function(){b(!1),u({reset:!0})}),3e3);var n={id:t,position:{x:100,y:100},rules:l.rules,startingSpikes:parseInt(l.startingSpikes),delay:0,spikes:parseInt(l.startingSpikes),isOutput:!1,out:[]};r(n)}else console.log("One or more of the rules is invalid"),o("One or more of the rules is invalid"),c()},children:[Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Node Name"}),Object(Q.jsx)(m.a.Control,{required:!0,name:"id",type:"text",placeholder:"n0",value:l.id,onChange:f})]}),Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Node Rules"}),Object(Q.jsx)(m.a.Control,{required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:l.rules,onChange:f}),Object(Q.jsx)(m.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Starting Spike Number"}),Object(Q.jsx)(m.a.Control,{required:!0,name:"startingSpikes",type:"number",value:l.startingSpikes,onChange:f})]}),Object(Q.jsx)(y.a,{variant:"secondary",onClick:c,children:"Close"})," "," ",Object(Q.jsx)(y.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},je=function(e,t){return t.reset?{id:""}:Object(l.a)(Object(l.a)({},e),{},Object(B.a)({},t.name,t.value))},be={id:""},he=function(e){var t=e.showNewOutputModal,n=e.handleCloseNewOutputModal,r=e.handleNewOutput,o=(e.handleError,function(){n()}),c=Object(a.useReducer)(je,be),i=Object(h.a)(c,2),s=i[0],l=i[1],u=Object(a.useState)(!1),d=Object(h.a)(u,2),j=(d[0],d[1]);return Object(Q.jsxs)(ie.a,{show:t,onHide:o,children:[Object(Q.jsx)(ie.a.Header,{closeButton:!0,children:Object(Q.jsx)(ie.a.Title,{children:"Create New Node"})}),Object(Q.jsx)(ie.a.Body,{children:Object(Q.jsxs)(m.a,{onSubmit:function(e){e.preventDefault();var t="".concat(s.id,"-").concat(Z.a.generate());o(),j(!0),setTimeout((function(){j(!1),l({reset:!0})}),3e3),r({id:t,position:{x:300,y:300},isOutput:!0,spikes:0,bitstring:" "})},children:[Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Output Node Name"}),Object(Q.jsx)(m.a.Control,{required:!0,name:"id",type:"text",placeholder:"n0",value:s.id,onChange:function(e){console.log(e.target.value),console.log(e.target.name),l({name:e.target.name,value:e.target.value})}})]}),Object(Q.jsx)(y.a,{variant:"secondary",onClick:o,children:"Close"})," "," ",Object(Q.jsx)(y.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},fe=function(e){var t=e.showEditModal,n=e.handleCloseEditModal,r=e.handleEditNode,o=e.handleError,c=e.neurons,i=Object(a.useState)(""),s=Object(h.a)(i,2),l=s[0],u=s[1],d=Object(a.useState)(""),j=Object(h.a)(d,2),b=j[0],f=j[1],O=Object(a.useState)(0),p=Object(h.a)(O,2),g=p[0],x=p[1],v=function(){n()};Object(a.useEffect)((function(){!function(){var e=Object.keys(c).reduce((function(e,t){return c[t].isOutput||(e[t]=c[t]),e}),{}),t=Object.keys(e);u(t[0]),f(e[t[0]].rules),x(e[t[0]].startingSpikes)}()}),[]);var w=Object.keys(c).reduce((function(e,t){return c[t].isOutput||(e[t]=c[t]),e}),{}),S=Object.keys(w).map((function(e){return Object(Q.jsx)("option",{value:e,children:e},e)}));return Object(Q.jsxs)(ie.a,{show:t,onHide:v,children:[Object(Q.jsx)(ie.a.Header,{closeButton:!0,children:Object(Q.jsx)(ie.a.Title,{children:"Edit Node"})}),Object(Q.jsx)(ie.a.Body,{children:Object(Q.jsxs)(m.a,{onSubmit:function(e){e.preventDefault(),W(b)?(console.log("All rules valid"),v(),setTimeout((function(){u(""),f(""),x(0)}),3e3),r(l,b,g)):(console.log("One or more of the rules is invalid"),o("One or more of the rules is invalid"))},children:[Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Select node to edit"}),Object(Q.jsx)(m.a.Control,{as:"select",value:l,onChange:function(e){var t=e.target.value;u(e.target.value),f(c[t].rules),x(c[t].startingSpikes)},children:S})]}),Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Node Rules"}),Object(Q.jsx)(m.a.Control,{required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:b,onChange:function(e){f(e.target.value)}}),Object(Q.jsx)(m.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Starting Spike Number"}),Object(Q.jsx)(m.a.Control,{required:!0,name:"startingSpikes",type:"number",placeholder:"0",value:g,onChange:function(e){return x(e.target.value)}})]}),Object(Q.jsx)(y.a,{variant:"secondary",onClick:v,children:"Close"})," "," ",Object(Q.jsx)(y.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},Oe=function(e){var t=e.showDeleteModal,n=e.handleCloseDeleteModal,r=e.handleDeleteNode,o=(e.handleError,e.neurons),c=Object(a.useState)(""),i=Object(h.a)(c,2),s=i[0],l=i[1],u=function(){n()},d=Object.keys(o).map((function(e){return Object(Q.jsx)("option",{value:e,children:e},e)})),j=Object.keys(o)[0];return Object(Q.jsxs)(ie.a,{show:t,onHide:u,children:[Object(Q.jsx)(ie.a.Header,{closeButton:!0,children:Object(Q.jsx)(ie.a.Title,{children:"Delete Node"})}),Object(Q.jsx)(ie.a.Body,{children:Object(Q.jsxs)(m.a,{onSubmit:function(e){console.log("NeuronId",s),e.preventDefault(),""!==s?(u(),setTimeout((function(){l("")}),3e3),r(s)):(u(),setTimeout((function(){l("")}),3e3),r(j))},children:[Object(Q.jsxs)(m.a.Group,{children:[Object(Q.jsx)(m.a.Label,{children:"Select node to delete"}),Object(Q.jsx)(m.a.Control,{as:"select",value:s,onChange:function(e){l(e.target.value)},children:d})]}),Object(Q.jsx)(y.a,{variant:"secondary",onClick:u,children:"Close"})," "," ",Object(Q.jsx)(y.a,{type:"submit",variant:"danger",children:"Delete neuron"})]})})]})},pe=n(186),ge=(n(148),function(e){return Object(Q.jsx)("td",{children:e})}),xe=function(e){return Object(Q.jsx)("tr",{children:e})},ve=function(e){var t=e.time,n=e.showChoiceHistoryModal,r=e.handleCloseHoiceHistoryModal,a=JSON.parse(localStorage.getItem(t-1+"sec")),o="There are no neurons";a&&(o=Object.keys(a).map((function(e){return Object(Q.jsx)("th",{children:e},e)})));for(var c=[],i=0;i<t;i++){var s=[];s.push(ge(i));var l=JSON.parse(localStorage.getItem(i+"sec"));for(var u in l)l[u].chosenRule?s.push(ge(l[u].chosenRule)):s.push(ge("No chosen rule"));c.push(xe(s)),s=[]}return Object(Q.jsx)(ie.a,{show:n,onHide:r,className:"custom-choice-history-modal",children:Object(Q.jsxs)(pe.a,{striped:!0,bordered:!0,hover:!0,children:[Object(Q.jsx)("thead",{children:Object(Q.jsxs)("tr",{children:[Object(Q.jsx)("th",{children:"Time"}),o]})}),Object(Q.jsx)("tbody",{children:c})]})})},me=n(82),ye=n.n(me),we=n(79),Se=n(11),ke=n(100),Ne=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],r=t[1],o="Are you sure you want to exit without saving your system?";return Object(a.useEffect)((function(){return window.onbeforeunload=n&&function(){return o},function(){window.onbeforeunload=null}}),[n]),[Object(Q.jsx)(Se.a,{when:n,message:o}),function(){return r(!0)},function(){return r(!1)}]},Ce={compact:!0,ignoreComment:!0,spaces:4,sanitize:!1};function Ee(e,t){var n=Object(a.useRef)(!1),r=Object(a.useRef)(t),o=document.getElementsByTagName("input");Object(a.useEffect)((function(){var e,t=Object(f.a)(o);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.addEventListener("focusin",(function(){n.current=!0,console.log("fOCUS ON ME")})),r.addEventListener("input",(function(){n.current=!0,console.log("fOCUS ON ME 2")})),r.addEventListener("focus",(function(){n.current=!0,console.log("fOCUS ON ME 3")}),!0),r.addEventListener("focusout",(function(){n.current=!1}))}}catch(a){t.e(a)}finally{t.f()}})),Object(a.useEffect)((function(){r.current=t})),Object(a.useEffect)((function(){function t(t){console.log("isFocus ".concat(n.current)),t.code===e&&0==n.current&&(console.log("handleKeyDown isFocus: ".concat(n.current)),console.log("Key pressed: "+t.code),r.current(t))}return document.addEventListener("keydown",(function(e){"Space"===e.code&&0==n&&e.preventDefault()})),document.addEventListener("keydown",function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,a),n=null}),e)}}(300,t)),function(){return document.removeEventListener("keydown",t)}}),[e])}var Re=Object(L.c)(ae||(ae=Object(s.a)(["\n  from {\n    transform: scaleX(100%);\n  }\n\n  to {\n    transform: scaleX(0%);\n  }\n"]))),Me=L.b.div(oe||(oe=Object(s.a)(["\n  ","\n  background-color: #c44569;\n  height: 4px;\n  transform-origin: left center;\n  margin-bottom: 2px;\n"])),(function(e){return e.isPlaying&&Object(L.a)(ce||(ce=Object(s.a)(["\n      animation: "," 3s linear; \n    "])),Re)})),Ie=function(){var e=Object(p.a)(null!=window.localStorage.getItem("originalNeurons")?JSON.parse(window.localStorage.getItem("originalNeurons")):{n1:{id:"n1",position:{x:50,y:50},rules:"a+/a->a;2",startingSpikes:1,delay:0,spikes:1,isOutput:!1,out:["n2"]},n2:{id:"n2",position:{x:200,y:50},rules:"a/a->a;1",startingSpikes:0,delay:0,spikes:0,isOutput:!1,out:["n3"]},n3:{id:"n3",position:{x:400,y:50},rules:"a/a->a;0",startingSpikes:1,delay:0,spikes:1,isOutput:!1,out:["n4"]},n4:{id:"n4",position:{x:400,y:200},isOutput:!0,spikes:0,bitstring:" "}}),t=Object(h.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(0),c=Object(h.a)(o,2),i=c[0],s=c[1],d=Object(a.useState)(!0),f=Object(h.a)(d,2),L=f[0],A=f[1],H=Object(a.useState)(""),B=Object(h.a)(H,2),P=B[0],F=B[1],G=Ne(),z=Object(h.a)(G,3),q=z[0],K=z[1],U=z[2],W=Object(a.useState)(!1),X=Object(h.a)(W,2),Y=X[0],Z=X[1],$=Object(a.useState)(!1),te=Object(h.a)($,2),ae=te[0],oe=te[1],ce=Object(a.useState)(!1),ie=Object(h.a)(ce,2),le=ie[0],ue=ie[1],je=Object(a.useState)(!1),be=Object(h.a)(je,2),pe=be[0],ge=be[1],xe=Object(a.useState)(!1),me=Object(h.a)(xe,2),Re=me[0],Ie=me[1],Te=Object(a.useState)(!1),Je=Object(h.a)(Te,2),_e=Je[0],De=Je[1],Le=Object(a.useState)(!1),Ae=Object(h.a)(Le,2),He=Ae[0],Be=Ae[1],Pe=Object(a.useState)(!1),Fe=Object(h.a)(Pe,2),Ge=Fe[0],ze=Fe[1],qe=Object(a.useState)(""),Ke=Object(h.a)(qe,2),Ue=Ke[0],We=Ke[1],Xe=Object(a.useState)(0),Qe=Object(h.a)(Xe,2),Ve=Qe[0],Ye=Qe[1],Ze=function(){return ue(!1)},$e=function(){ze(!0),Be(!1),console.log("alert from simulationEnd"),alert("Simulation has ended.")},et=function(e){We(e),setTimeout((function(){We("")}),3e3)},tt=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("newEdge",t,n),e.next=3,r((function(e){var r=Object(u.a)(e[t].out);r.push(n),e[t].out=r}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nt=function(){var e=Object(b.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r((function(e){e[n].position=t})),K(!0);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function rt(){return(rt=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){e[t.id]=t}));case 2:K(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(){return(at=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){e[t.id]=t}));case 2:K(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(b.a)(j.a.mark((function e(t,a,o){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){e[t].startingSpikes=o,e[t].spikes=o,e[t].rules=a}));case 2:K(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDeleteNode",t),e.next=3,r((function(e){for(var n in e){var r=e[n];if(!r.isOutput){r.out;var a=r.out.filter((function(e){return e!==t}));e[n].out=a}}delete e[t]}));case 3:K(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var it=function(){r((function(e){return JSON.parse(window.localStorage.getItem("originalNeurons"))})),s(0),Be(!1),ze(!1);var e=window.localStorage.getItem("originalNeurons");window.localStorage.clear(),window.localStorage.setItem("originalNeurons",e)},st=Object(a.useState)({}),lt=Object(h.a)(st,2),ut=lt[0],dt=lt[1],jt=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt(t);case 2:console.log(t),ue(!0),ue&&Be(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bt=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==i&&(console.log("Time is: "+i),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),console.log("Original neurons on time = 1 ",window.localStorage.getItem("originalNeurons"))),Ge){e.next=7;break}return e.next=4,r((function(e){return ne(e,i,L,jt,$e)}));case 4:s((function(e){return e+1})),e.next=8;break;case 7:alert("Simulation has ended.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i>1)){e.next=9;break}return t=i.valueOf(),ze(!1),e.next=5,r((function(e){return re(t-2)}));case 5:return e.next=7,s((function(e){return e-1}));case 7:e.next=10;break;case 9:1==i&&it();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useRef)(n).current=n;var ft=Object(a.useRef)(bt);return ft.current=function(){bt(),Ye((function(e){return e+1}))},Object(a.useEffect)((function(){if(He)var e=setInterval((function(){ft.current()}),3e3);return function(){return clearInterval(e)}}),[He,ft]),Object(a.useEffect)((function(){le&&console.log("showChooseRuleModal is true")}),[]),Ee("Space",(function(){console.log("Space Pressed"),Be((function(e){return!e}))})),Ee("ArrowLeft",(function(){console.log("Left Key Pressed"),ht()})),Ee("ArrowRight",(function(){console.log("Right Key Pressed"),Ge||ft.current()})),Object(Q.jsx)(we.a,{children:Object(Q.jsx)(Se.d,{children:Object(Q.jsx)(Se.b,{path:"/",children:Object(Q.jsxs)(x.a,{children:[Ue&&Object(Q.jsx)(v.a,{variant:"danger",children:Ue}),Object(Q.jsxs)(O.slide,{children:[Object(Q.jsx)(m.a,{children:Object(Q.jsx)(m.a.File,{id:"custom-file",label:P||"Load file...",custom:!0,onChange:function(e){!function(t){var n=t.files[0];if(ze(!1),n.type&&-1===n.type.indexOf("text/xml"))et("File is not a xml file");else{var a=new FileReader,o=function(){var t=Object(b.a)(j.a.mark((function t(n,r){var a,o,i,s,l,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r._parent,a=Object.keys(r._parent),o=a.length,i=a[o-1],(s=r._parent[i]).length>0?(l=s,u=s.length-1,l[u]=n):"out"==i?r._parent[i]=[n]:"bitstring"==i?(console.log("bitstring"),r._parent[i]=""):r._parent[i]=c(n)}catch(e){}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();a.addEventListener("load",function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={compact:!0,trim:!0,ignoreDeclaration:!0,ignoreInstruction:!0,ignoreAttributes:!0,ignoreComment:!0,ignoreCdata:!0,ignoreDoctype:!0,textFn:o},e.next=3,ye.a.xml2js(t.target.result,a);case 3:return c=e.sent,console.log("Result.content"),e.next=7,r((function(e){return c.content}));case 7:return e.next=9,r((function(e){for(var t in e)e[t].bitstring&&(console.log(e[t].bitstring),e[t].bitstring=" ")}));case 9:window.localStorage.setItem("originalNeurons",JSON.stringify(c.content)),F(n.name);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.readAsText(n),s(0)}function c(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}}(e.target)}})}),Object(Q.jsx)("div",{children:Object(Q.jsxs)(y.a,{variant:"primary",disabled:i>0,onClick:function(){var e={content:n},t=ye.a.json2xml(e,Ce),r=new Blob([t],{type:"text/xml;charset=utf-8"});Object(ke.saveAs)(r,Date().toString()+"-Neurons.xmp"),U()},children:[Object(Q.jsx)(C.a,{})," ","Save"]})}),Object(Q.jsx)("div",{children:Object(Q.jsxs)(y.a,{variant:"primary",onClick:function(){return Ie(!0)},children:[Object(Q.jsx)(E.a,{})," ","Choice History"]})})]}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{style:{textAlign:"center"},children:Object(Q.jsx)("h1",{style:{fontWeight:"700"},className:"text-primary",children:"WebSnapse"})}),Object(Q.jsxs)(w.a,{children:[Object(Q.jsx)(S.a,{children:Object(Q.jsxs)("div",{children:[Object(Q.jsx)(m.a,{children:Object(Q.jsx)(m.a.Group,{id:"formGridCheckbox",children:Object(Q.jsxs)(w.a,{children:[Object(Q.jsx)(S.a,{sm:6,children:Object(Q.jsx)(m.a.Check,{type:"checkbox",label:"Pseudorandom",defaultChecked:L,onChange:function(){A(!L)}})}),Object(Q.jsx)(S.a,{sm:1,style:{textAlign:"left"},children:Object(Q.jsx)(k.a,{placement:"right",delay:{show:250,hide:400},overlay:function(e){return Object(Q.jsx)(g.a,Object(l.a)(Object(l.a)({id:"button-tooltip"},e),{},{children:"Pseudorandom will allow the system to decide which rule will be executed. Unchecking it will let you decide."}))},children:Object(Q.jsx)(R.a,{})})})]})})}),0==i?Object(Q.jsx)("div",{}):Object(Q.jsxs)("div",{style:{backgroundColor:"#778beb",color:"white",borderRadius:"10px",padding:"0.5em"},children:[Object(Q.jsx)(M.a,{color:"white",size:30})," ",Object(Q.jsx)("strong",{children:"Time:"})," ",0==i?"Start playing!":i]})]})}),Object(Q.jsxs)(S.a,{children:[Object(Q.jsxs)("div",{className:"snapse-controls",style:{textAlign:"center",marginBottom:"0.8em"},children:[Object(Q.jsx)(y.a,{variant:"link",onClick:ht,children:Object(Q.jsx)(I.a,{})})," ",Object(Q.jsxs)("div",{style:{display:"inline-block"},children:[Object(Q.jsx)(Me,{isPlaying:He},Ve),Object(Q.jsx)(y.a,{size:"lg",className:"snapse-controls-play",onClick:function(){Ge?alert("Simulation has ended."):(console.log("isPlaying before ".concat(He)),Be((function(e){return!e})),console.log("isPlaying after ".concat(He)))},children:He?Object(Q.jsx)(T.a,{}):Object(Q.jsx)(J.a,{})})]})," "," ",Object(Q.jsx)(y.a,{variant:"link",onClick:function(){return bt()},children:Object(Q.jsx)(_.a,{})})," "]}),Object(Q.jsx)("div",{style:{textAlign:"center"},children:Object(Q.jsxs)(N.a,{children:[Object(Q.jsxs)(N.a.Toggle,{id:"dropdown-basic",children:[Object(Q.jsx)(D.a,{})," ","Node Actions"]}),Object(Q.jsxs)(N.a.Menu,{children:[Object(Q.jsx)(N.a.Item,{children:Object(Q.jsx)(y.a,{variant:"link",size:"sm",className:"node-actions text-primary",onClick:function(){return Z(!0)},disabled:i>0,children:"New Node"})}),Object(Q.jsx)(N.a.Item,{children:Object(Q.jsx)(y.a,{variant:"link",size:"sm",className:"node-actions text-primary",onClick:function(){return oe(!0)},disabled:i>0,children:"New Output Node"})}),Object(Q.jsx)(N.a.Item,{children:Object(Q.jsx)(y.a,{variant:"link",size:"sm",className:"node-actions text-info",onClick:function(){return ge(!0)},disabled:i>0,children:"Edit"})}),Object(Q.jsx)(N.a.Item,{children:Object(Q.jsx)(y.a,{variant:"link",size:"sm",className:"node-actions text-danger",onClick:function(){return De(!0)},disabled:i>0,children:"Delete"})})]})]})})]}),Object(Q.jsxs)(S.a,{style:{textAlign:"right"},children:[Object(Q.jsx)(y.a,{variant:"danger",onClick:it,children:"Restart"})," "]})]})]}),Object(Q.jsx)("hr",{}),Object(Q.jsx)(V,{neurons:n,onEdgeCreate:function(e,t,n){tt(e.id(),t.id()),n.remove()},handleChangePosition:nt}),Object(Q.jsx)(ve,{time:i,showChoiceHistoryModal:Re,handleCloseHoiceHistoryModal:function(){return Ie(!1)}}),Object(Q.jsx)(de,{showNewNodeModal:Y,handleCloseModal:function(){return Z(!1)},handleNewNode:function(e){return rt.apply(this,arguments)},handleError:et}),Object(Q.jsx)(he,{showNewOutputModal:ae,handleCloseNewOutputModal:function(){return oe(!1)},handleNewOutput:function(e){return at.apply(this,arguments)},handleError:et}),Object(Q.jsx)(fe,{showEditModal:pe,handleCloseEditModal:function(){return ge(!1)},handleEditNode:function(e,t,n){return ot.apply(this,arguments)},handleError:et,neurons:n}),Object(Q.jsx)(Oe,{showDeleteModal:_e,handleCloseDeleteModal:function(){return De(!1)},handleDeleteNode:function(e){return ct.apply(this,arguments)},handleError:et,neurons:n}),Object(Q.jsx)(se,{showChooseRuleModal:le,handleCloseChooseRuleModal:Ze,rules:ut,handleChosenRules:function(e){Ze(),r((function(t){for(var n in t)for(var r in e)if(n==r){var a=ee(e[r]),o=Object(h.a)(a,6),c=(o[0],o[1],o[2],o[3],o[4],o[5]);t[n].delay=c,t[n].currentRule=e[r],t[n].chosenRule=e[r]}})),Be(!0)}}),q]})})})})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,204)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},Je=n(104),_e=n.n(Je),De=n(105),Le=n.n(De);G.a.use(_e.a),G.a.use(Le.a),i.a.render(Object(Q.jsx)(o.a.StrictMode,{children:Object(Q.jsx)(Ie,{})}),document.getElementById("root")),Te()}},[[180,1,2]]]);
//# sourceMappingURL=main.2293ed4f.chunk.js.map