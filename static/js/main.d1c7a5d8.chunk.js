(this.webpackJsonpthesis=this.webpackJsonpthesis||[]).push([[0],{112:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},148:function(e,t,n){},153:function(e,t){},155:function(e,t){},180:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),s=n(14),c=n.n(s),i=(n(112),n(67)),l=n(41),u=n(106),d=n(10),j=n.n(d),h=n(18),b=n(8),f=(n(114),n(115),n(97)),p=n(55),O=n(187),x=n(188),g=n(189),v=n(201),m=n(98),y=n(202),w=n(193),k=n(99),S=n(203),C=n(190),N=n(191),E=n(192),R=n(194),M=n(195),I=n(196),_=n(197),D=n(198),T=n(199),L=n(68),A=n(81),H=n.n(A),J=n(23),P=[{selector:".snapse-node, .snapse-output",style:{"font-family":"Computer Modern","background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top",color:"black",content:"data(label)"}},{selector:".snapse-node__rules, .snapse-node__output",style:(r={"font-family":"Computer Modern","background-color":"white","border-width":1,events:"no","text-wrap":"wrap","text-halign":"center","text-valign":"center"},Object(J.a)(r,"text-wrap","wrap"),Object(J.a)(r,"content","data(label)"),Object(J.a)(r,"height",150),Object(J.a)(r,"shape","roundrectangle"),Object(J.a)(r,"width",100),r)},{selector:".snapse-node__time, .snapse-node__spike",style:{"font-family":"Computer Modern","background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:"edge",style:{"font-family":"Computer Modern","curve-style":"bezier","target-arrow-shape":"triangle","text-background-color":"white","text-background-shape":"rectangle",width:1}},{selector:".edge--triggering",style:{"line-color":"magenta","line-style":"dashed","target-arrow-color":"magenta",width:3}}],z=n(46),F=n.n(z);var G=function(){var e=Object(a.useRef)(null);return Object(a.useEffect)((function(){var t,n=e.current,r=0;return function e(){r++,n&&n.edges().animate({style:{"line-dash-offset":-r}}),t=requestAnimationFrame(e)}(),function(){t&&cancelAnimationFrame(t)}}),[]),[e,function(t){e.current=t}]},B=n(56),q=function(e,t,n,r,a,o){return[{data:{rootId:e,id:"".concat(e),label:r},classes:"snapse-output",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-output"),parent:e,label:a},classes:"snapse-node__output",position:{x:t,y:n}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:o},classes:"snapse-node__spike",position:{x:t,y:n+40}}]},K=function(e){var t=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e)||/(a+)(\+*\**)\/(a+)->(0);(0)/.exec(e);return console.log(t),t},W=function(e,t,n){return{data:{id:e+"-"+t,source:e,target:t},classes:n}},X=function(e){for(var t=e.split(" "),n=0,r=0;r<t.length;r++)null!=K(t[r])?n+=1:console.log("invalidRule",t[r]);return n==t.length?1:0},U=n(185),V=n(1),Q=function(e){var t=e.neurons,n=e.onEdgeCreate,r=e.handleChangePosition,o=G(),s=Object(b.a)(o,2),c=s[0],i=s[1];var l=function(e){var t,n,r,a,o,s,c={nodes:[],edges:[]};for(var i in e){var l=e[i];if(l.isOutput){var u=q(l.id,l.position.x,l.position.y,l.id,l.bitstring,0);c.nodes.push(u[0]),c.nodes.push(u[1]),c.nodes.push(u[2])}else{var d=(t=l.id,n=l.position.x,r=l.position.y,a=l.rules,o=l.spikes,s=l.delay,[{data:{id:t,label:t},position:{x:n,y:r},classes:"snapse-node"},{data:{id:t+"-rules",parent:t,label:a.replace(/ /g,"\n")},position:{x:n,y:r},classes:"snapse-node__rules"},{data:{id:t+"-spike",parent:t,label:"".concat(0==o?"\u03bb":o)},position:{x:n,y:r-60},classes:"snapse-node__spike"},{data:{id:t+"-time",parent:t,label:s},position:{x:n,y:r+90},classes:"snapse-node__time"}]);c.nodes.push(d[0]),c.nodes.push(d[1]),c.nodes.push(d[2]),c.nodes.push(d[3])}if(l.out)for(var j=0;j<l.out.length;j++)if(l.delay<0){console.log(l.delay);var h,b=Object(B.a)(l.out);try{for(b.s();!(h=b.n()).done;){h.value;var f=W(l.id,l.out[j]," edge--triggering");c.edges.push(f)}}catch(O){b.e(O)}finally{b.f()}}else{var p=W(l.id,l.out[j],"");c.edges.push(p)}}return c}(t);return Object(a.useEffect)((function(){var e=c.current;e&&(e.on("mouseup",".snapse-node, .snapse-output",(function(e){console.log("change position",e.target.id()),r(e.position,e.target.id())})),e.gridGuide({guidelinesStyle:{strokeStyle:"black",horizontalDistColor:"#ff0000",verticalDistColor:"green",initPosAlignmentColor:"#0000ff"}}),e.edgehandles({handleNodes:".snapse-node, .snapse-output",preview:!1,loopAllowed:function(){return!1},edgeType:function(e,t){return"flat"},complete:n}))}),[c]),Object(V.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(V.jsxs)(m.a,{className:"center-graph-button",variant:"secondary",onClick:function(){var e=c.current;e&&(e.center(),e.fit(),e.zoom({level:.8,position:{x:100,y:100}}))},children:[Object(V.jsx)(U.a,{})," ","Center Graph"]}),Object(V.jsx)(H.a,{cy:i,elements:H.a.normalizeElements(l),style:{width:"100%",height:"100%"},stylesheet:P})]})},Y=n(57),Z=n.n(Y),$=n(37);function ee(e){/(a+)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e);var t=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e),n=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(0);(0)/.exec(e);if(t){var r=Object(b.a)(t,7),a=r[1],o=r[2],s=r[3],c=r[4],i=r[5],l=r[6],u=parseInt(l,10);return[a.length,o.length-2,s,c.length,i.length,u]}if(n){var d=Object(b.a)(n,7),j=d[1],h=d[2],f=d[3],p=d[4];d[5],d[6];return[j.length,h.length-2,f,p.length,0,0]}return!1}function te(e,t,n,r){if("+"==n){if(t>0)return(r-e)%t==0&&r-e>=t;if(r>=e)return!0}else if("*"==n){if(t>0)return(r-e)%t==0;if(r>=e-1)return!0}else if(r==e)return!0;return!1}function ne(e,t,n,r,a){var o=Object($.a)(e,(function(e){var t={},o=[],s={},c=!0;for(var i in e){if(!(C=e[i]).currentRule&&!C.isOutput){delete e[C.id].currentRule;for(var l=C.rules.split(" "),u=[],d=0;d<l.length;d++){var j=ee(l[d]),h=Object(b.a)(j,6),f=h[0],p=h[1],O=h[2],x=h[3],g=h[4],v=h[5];te(f,p,O,C.spikes)&&(u.push(l[d]),c=!1)}if(1==u.length){e[C.id].currentRule=u[0],e[C.id].chosenRule=u[0];var m=ee(u[0]),y=Object(b.a)(m,6);f=y[0],p=y[1],O=y[2],x=y[3],g=y[4],v=y[5];e[C.id].delay=v}else if(1==n&&u.length>1){var w=Math.floor(Math.random()*u.length),k=ee(u[w]),S=Object(b.a)(k,6);f=S[0],p=S[1],O=S[2],x=S[3],g=S[4],v=S[5];e[C.id].currentRule=u[w],e[C.id].chosenRule=u[w],e[C.id].delay=v}else 0==n&&u.length>1&&(s[C.id]=u)}}if(Object.keys(s).length>0)r(s);else{for(var i in e){var C;if((C=e[i]).currentRule){if(c=!1,C.delay>=0){var N=C.delay.valueOf();N--,e[C.id].delay=N}if(console.log(C.delay),C.delay<0){var E=ee(C.currentRule),R=Object(b.a)(E,6),M=(f=R[0],p=R[1],O=R[2],x=R[3],g=R[4],v=R[5],C.spikes.valueOf());M-=x,e[C.id].spikes=M;var I,_=C.out,D=Object(B.a)(_);try{for(D.s();!(I=D.n()).done;){var T=I.value;t[T]=T in t?t[T]+g:g}}catch(J){D.e(J)}finally{D.f()}delete e[C.id].currentRule}}else C.isOutput?(o.push(C.id),i in t||(t[i]=0)):-1==C.delay&&(e[C.id].delay=0)}for(var L in t){var A=e[L].spikes.valueOf();if(A+=t[L],e[L].spikes=A,e[L].isOutput){var H="".concat(e[L].bitstring).concat(t[L]||"0");e[L].bitstring=H}}c&&a()}}));return localStorage.setItem(t+"sec",JSON.stringify(o)),o}function re(e){return console.log("back step automata"),JSON.parse(localStorage.getItem(e+"sec"))}var ae,oe,se,ce=n(200),ie=function(e){var t=e.showChooseRuleModal,n=e.handleCloseChooseRuleModal,r=e.rules,o=e.handleChosenRules,s=Object(p.a)({}),c=Object(b.a)(s,2),i=c[0],l=c[1];function u(e,t){l((function(n){for(var r in n)r==t&&(n[r]=e.target.value)}))}Object(a.useEffect)((function(){l((function(e){for(var t in r)e[t]=r[t][0]}))}),[r]);for(var d=function(e,t){var n=t.map((function(e){return Object(V.jsx)("option",{value:e,children:e},e)}));return Object(V.jsxs)(y.a.Group,{children:[Object(V.jsx)(y.a.Label,{children:e}),Object(V.jsx)(y.a.Control,{as:"select",value:i[e],onChange:function(t){return u(t,e)},children:n})]})},j=Object.keys(r),h=[],f=0;f<j.length;f++)console.log(f),h.push(d(j[f],r[j[f]]));return Object(V.jsxs)(ce.a,{show:t,onHide:n,backdrop:"static",keyboard:!1,children:[Object(V.jsx)(ce.a.Header,{children:Object(V.jsx)(ce.a.Title,{children:"Choose Rule Form"})}),Object(V.jsx)(ce.a.Body,{children:Object(V.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),o(i)},children:[h,Object(V.jsx)(m.a,{type:"submit",children:"Submit"})]})})]})},le=function(e,t){return t.reset?{startingSpikes:0,rules:""}:Object(l.a)(Object(l.a)({},e),{},Object(J.a)({},t.name,t.value))},ue=function(e){var t=e.showNewNodeModal,n=e.handleCloseModal,r=e.handleNewNode,o=e.handleError,s=function(){n()},c=Object(a.useReducer)(le,{}),i=Object(b.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(!1),j=Object(b.a)(d,2),h=(j[0],j[1]),f=function(e){console.log(e.target.name),u({name:e.target.name,value:e.target.value})};return Object(V.jsxs)(ce.a,{show:t,onHide:s,children:[Object(V.jsx)(ce.a.Header,{closeButton:!0,children:Object(V.jsx)(ce.a.Title,{children:"Create New Node"})}),Object(V.jsx)(ce.a.Body,{children:Object(V.jsxs)(y.a,{onSubmit:function(e){e.preventDefault();var t=Z.a.generate();if(X(l.rules)){console.log("All rules valid"),s(),h(!0),setTimeout((function(){h(!1),u({reset:!0})}),3e3);var n={id:t,position:{x:100,y:100},rules:l.rules,startingSpikes:parseInt(l.startingSpikes),delay:0,spikes:parseInt(l.startingSpikes),isOutput:!1,out:[]};r(n)}else console.log("One or more of the rules is invalid"),o("One or more of the rules is invalid"),s()},children:[Object(V.jsxs)(y.a.Group,{children:[Object(V.jsx)(y.a.Label,{children:"Node Rules"}),Object(V.jsx)(y.a.Control,{required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:l.rules,onChange:f}),Object(V.jsx)(y.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(V.jsxs)(y.a.Group,{children:[Object(V.jsx)(y.a.Label,{children:"Starting Spike Number"}),Object(V.jsx)(y.a.Control,{required:!0,name:"startingSpikes",type:"number",placeholder:"0",value:l.startingSpikes,onChange:f})]}),Object(V.jsx)(m.a,{variant:"secondary",onClick:s,children:"Close"})," "," ",Object(V.jsx)(m.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},de=function(e){var t=e.showEditModal,n=e.handleCloseEditModal,r=e.handleEditNode,o=e.handleError,s=e.neurons,c=Object(a.useState)(""),i=Object(b.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(""),j=Object(b.a)(d,2),h=j[0],f=j[1],p=Object(a.useState)(0),O=Object(b.a)(p,2),x=O[0],g=O[1],v=function(){n()};Object(a.useEffect)((function(){!function(){var e=Object.keys(s).reduce((function(e,t){return s[t].isOutput||(e[t]=s[t]),e}),{}),t=Object.keys(e);u(t[0]),f(e[t[0]].rules),g(e[t[0]].startingSpikes)}()}),[]);var w=Object.keys(s).reduce((function(e,t){return s[t].isOutput||(e[t]=s[t]),e}),{}),k=Object.keys(w).map((function(e){return Object(V.jsx)("option",{value:e,children:e},e)}));return Object(V.jsxs)(ce.a,{show:t,onHide:v,children:[Object(V.jsx)(ce.a.Header,{closeButton:!0,children:Object(V.jsx)(ce.a.Title,{children:"Edit Node"})}),Object(V.jsx)(ce.a.Body,{children:Object(V.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),X(h)?(console.log("All rules valid"),v(),setTimeout((function(){u(""),f(""),g(0)}),3e3),r(l,h,x)):(console.log("One or more of the rules is invalid"),o("One or more of the rules is invalid"))},children:[Object(V.jsxs)(y.a.Group,{children:[Object(V.jsx)(y.a.Label,{children:"Select node to edit"}),Object(V.jsx)(y.a.Control,{as:"select",value:l,onChange:function(e){var t=e.target.value;u(e.target.value),f(s[t].rules),g(s[t].startingSpikes)},children:k})]}),Object(V.jsxs)(y.a.Group,{children:[Object(V.jsx)(y.a.Label,{children:"Node Rules"}),Object(V.jsx)(y.a.Control,{required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:h,onChange:function(e){f(e.target.value)}}),Object(V.jsx)(y.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(V.jsxs)(y.a.Group,{children:[Object(V.jsx)(y.a.Label,{children:"Starting Spike Number"}),Object(V.jsx)(y.a.Control,{required:!0,name:"startingSpikes",type:"number",placeholder:"0",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(V.jsx)(m.a,{variant:"secondary",onClick:v,children:"Close"})," "," ",Object(V.jsx)(m.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},je=function(e){var t=e.showDeleteModal,n=e.handleCloseDeleteModal,r=e.handleDeleteNode,o=(e.handleError,e.neurons),s=Object(a.useState)(Object.keys(o)),c=Object(b.a)(s,2),i=c[0],l=c[1],u=function(){n()},d=Object.keys(o).map((function(e){return Object(V.jsx)("option",{value:e,children:e},e)})),j=Object.keys(o)[0];return Object(V.jsxs)(ce.a,{show:t,onHide:u,children:[Object(V.jsx)(ce.a.Header,{closeButton:!0,children:Object(V.jsx)(ce.a.Title,{children:"Delete Node"})}),Object(V.jsx)(ce.a.Body,{children:Object(V.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),""!==i?(u(),setTimeout((function(){l("")}),3e3),r(i)):(u(),setTimeout((function(){l("")}),3e3),r(j))},children:[Object(V.jsxs)(y.a.Group,{children:[Object(V.jsx)(y.a.Label,{children:"Select node to delete"}),Object(V.jsx)(y.a.Control,{as:"select",defaultValue:j,value:i,onChange:function(e){l(e.target.value)},children:d})]}),Object(V.jsx)(m.a,{variant:"secondary",onClick:u,children:"Close"})," "," ",Object(V.jsx)(m.a,{type:"submit",variant:"danger",children:"Delete neuron"})]})})]})},he=n(186),be=(n(148),function(e){return Object(V.jsx)("td",{children:e})}),fe=function(e){return Object(V.jsx)("tr",{children:e})},pe=function(e){var t=e.time,n=e.showChoiceHistoryModal,r=e.handleCloseHoiceHistoryModal,a=JSON.parse(localStorage.getItem(t-1+"sec")),o="There are no neurons";a&&(o=Object.keys(a).map((function(e){return Object(V.jsx)("th",{children:e},e)})));for(var s=[],c=0;c<t;c++){var i=[];i.push(be(c));var l=JSON.parse(localStorage.getItem(c+"sec"));for(var u in l)l[u].chosenRule?i.push(be(l[u].chosenRule)):i.push(be("No chosen rule"));s.push(fe(i)),i=[]}return Object(V.jsx)(ce.a,{show:n,onHide:r,className:"custom-choice-history-modal",children:Object(V.jsxs)(he.a,{striped:!0,bordered:!0,hover:!0,children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{children:"Time"}),o]})}),Object(V.jsx)("tbody",{children:s})]})})},Oe=n(82),xe=n.n(Oe),ge=n(79),ve=n(11),me=n(100),ye=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],o=n[1],s="Are you sure you want to exit without saving your system?";return Object(a.useEffect)((function(){function t(){console.log("isDirty:"+r),r&&(console.log(JSON.stringify(e)),window.localStorage.setItem("neurons",JSON.stringify(e)),console.log(JSON.parse(window.localStorage.getItem("neurons"))))}return window.onbeforeunload=r&&function(){return s},window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t),window.onbeforeunload=null}}),[r]),[Object(V.jsx)(ve.a,{when:r,message:s}),function(){return o(!0)},function(){return o(!1)}]},we={compact:!0,ignoreComment:!0,spaces:4,sanitize:!1},ke=0,Se=null!=window.localStorage.getItem("neurons")?JSON.parse(window.localStorage.getItem("neurons")):{n1:{id:"n1",position:{x:50,y:50},rules:"a+/a->a;2",startingSpikes:1,delay:0,spikes:1,isOutput:!1,out:["n2"]},n2:{id:"n2",position:{x:200,y:50},rules:"a/a->a;1",startingSpikes:0,delay:0,spikes:0,isOutput:!1,out:["n3"]},n3:{id:"n3",position:{x:400,y:50},rules:"a/a->a;0",startingSpikes:1,delay:0,spikes:1,isOutput:!1,out:["n4"]},n4:{id:"n4",position:{x:400,y:200},isOutput:!0,spikes:0,bitstring:" "}},Ce=function(e,t){var n=Object(a.useRef)(t);Object(a.useEffect)((function(){n.current=t})),Object(a.useEffect)((function(){function t(t){t.code===e&&(ke++,console.log("Key presses:"+ke),console.log("Key pressed: "+t.code),n.current(t))}return document.addEventListener("keydown",(function(e){e.preventDefault()})),document.addEventListener("keydown",function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,a),n=null}),e)}}(300,t)),function(){return document.removeEventListener("keydown",t)}}),[e])};var Ne=Object(L.c)(ae||(ae=Object(i.a)(["\n  from {\n    transform: scaleX(100%);\n  }\n\n  to {\n    transform: scaleX(0%);\n  }\n"]))),Ee=L.b.div(oe||(oe=Object(i.a)(["\n  ","\n  background-color: #c44569;\n  height: 4px;\n  transform-origin: left center;\n  margin-bottom: 2px;\n"])),(function(e){return e.isPlaying&&Object(L.a)(se||(se=Object(i.a)(["\n      animation: "," 3s linear; \n    "])),Ne)})),Re=function(){var e=Object(p.a)(Se),t=Object(b.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(0),s=Object(b.a)(o,2),c=s[0],i=s[1],d=Object(a.useState)(!0),L=Object(b.a)(d,2),A=L[0],H=L[1],J=Object(a.useState)(""),P=Object(b.a)(J,2),z=P[0],F=P[1],G=ye(n),B=Object(b.a)(G,3),q=B[0],K=B[1],W=B[2],X=Object(a.useState)(!1),U=Object(b.a)(X,2),Y=U[0],$=U[1],te=Object(a.useState)(!1),ae=Object(b.a)(te,2),oe=ae[0],se=ae[1],ce=Object(a.useState)(!1),le=Object(b.a)(ce,2),he=le[0],be=le[1],fe=Object(a.useState)(!1),Oe=Object(b.a)(fe,2),ke=Oe[0],Ne=Oe[1],Re=Object(a.useState)(!1),Me=Object(b.a)(Re,2),Ie=Me[0],_e=Me[1],De=Object(a.useState)(!1),Te=Object(b.a)(De,2),Le=Te[0],Ae=Te[1],He=Object(a.useState)(!1),Je=Object(b.a)(He,2),Pe=Je[0],ze=Je[1],Fe=Object(a.useState)(""),Ge=Object(b.a)(Fe,2),Be=Ge[0],qe=Ge[1],Ke=Object(a.useState)(0),We=Object(b.a)(Ke,2),Xe=We[0],Ue=We[1],Ve=function(){return se(!1)},Qe=function(){ze(!0),Ae(!1),console.log("alert from simulationEnd"),alert("Simulation has ended.")},Ye=function(e){qe(e),setTimeout((function(){qe("")}),3e3)},Ze=function(){var e=Object(h.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("newEdge",t,n),e.next=3,r((function(e){var r=Object(u.a)(e[t].out);r.push(n),e[t].out=r}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$e=function(){var e=Object(h.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r((function(e){e[n].position=t})),K();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function et(){return(et=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){e[t.id]=t}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(){return(tt=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){var t=Z.a.generate();e[t]={id:t,position:{x:300,y:300},isOutput:!0,spikes:0,bitstring:" "}}));case 2:K();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){return(nt=Object(h.a)(j.a.mark((function e(t,a,o){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){e[t].startingSpikes=o,e[t].spikes=o,e[t].rules=a}));case 2:K(),Se=n,window.localStorage.setItem("neurons",JSON.stringify(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(){return(rt=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDeleteNode",t),K(),e.next=4,r((function(e){for(var n in e){var r=e[n];if(!r.isOutput){r.out;var a=r.out.filter((function(e){return e!==t}));e[n].out=a}}delete e[t]}));case 4:console.log(n),Se=n,window.localStorage.setItem("neurons",JSON.stringify(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var at=function(){r((function(e){return Se})),i(0),Ae(!1),ze(!1),localStorage.clear()},ot=Object(a.useState)({}),st=Object(b.a)(ot,2),ct=st[0],it=st[1],lt=function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(t);case 2:console.log(t),se(!0),se&&Ae(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==c&&(console.log("Time is: "+c),Se=JSON.parse(JSON.stringify(n))),Pe){e.next=7;break}return e.next=4,r((function(e){return ne(e,c,A,lt,Qe)}));case 4:i((function(e){return e+1})),e.next=8;break;case 7:alert("Simulation has ended.");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(h.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c>1)){e.next=9;break}return t=c.valueOf(),ze(!1),e.next=5,r((function(e){return re(t-2)}));case 5:return e.next=7,i((function(e){return e-1}));case 7:e.next=10;break;case 9:1==c&&at();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useRef)(n).current=n;var jt=Object(a.useRef)(ut);return jt.current=function(){ut(),Ue((function(e){return e+1}))},Object(a.useEffect)((function(){if(Le)var e=setInterval((function(){jt.current()}),3e3);return function(){return clearInterval(e)}}),[Le,jt]),Object(a.useEffect)((function(){oe&&console.log("showChooseRuleModal is true")}),[]),Ce("Space",(function(){console.log("Space Pressed"),Ae((function(e){return!e}))})),Ce("ArrowLeft",(function(){console.log("Left Key Pressed"),dt()})),Ce("ArrowRight",(function(){console.log("Right Key Pressed"),Pe||jt.current()})),Object(V.jsx)(ge.a,{children:Object(V.jsx)(ve.d,{children:Object(V.jsx)(ve.b,{path:"/",children:Object(V.jsxs)(x.a,{children:[Be&&Object(V.jsx)(g.a,{variant:"danger",children:Be}),Object(V.jsxs)(f.slide,{children:[Object(V.jsxs)(v.a,{children:[Object(V.jsxs)(v.a.Toggle,{id:"dropdown-basic",children:[Object(V.jsx)(C.a,{})," ","Node Actions"]}),Object(V.jsxs)(v.a.Menu,{children:[Object(V.jsx)(v.a.Item,{children:Object(V.jsx)(m.a,{variant:"link",size:"sm",className:"node-actions text-primary",onClick:function(){return $(!0)},disabled:c>0,children:"New Node"})}),Object(V.jsx)(v.a.Item,{children:Object(V.jsx)(m.a,{variant:"link",size:"sm",className:"node-actions text-primary",onClick:function(){return tt.apply(this,arguments)},disabled:c>0,children:"New Output Node"})}),Object(V.jsx)(v.a.Item,{children:Object(V.jsx)(m.a,{variant:"link",size:"sm",className:"node-actions text-info",onClick:function(){return be(!0)},disabled:c>0,children:"Edit"})}),Object(V.jsx)(v.a.Item,{children:Object(V.jsx)(m.a,{variant:"link",size:"sm",className:"node-actions text-danger",onClick:function(){return _e(!0)},disabled:c>0,children:"Delete"})})]})]}),Object(V.jsx)(y.a,{children:Object(V.jsx)(y.a.File,{id:"custom-file",label:z||"Load file...",custom:!0,onChange:function(e){!function(t){var n=t.files[0];if(ze(!1),n.type&&-1===n.type.indexOf("text/xml"))Ye("File is not a xml file");else{var a=new FileReader,o=function(){var t=Object(h.a)(j.a.mark((function t(n,r){var a,o,c,i,l,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r._parent,a=Object.keys(r._parent),o=a.length,c=a[o-1],(i=r._parent[c]).length>0?(l=i,u=i.length-1,l[u]=n):"out"==c?r._parent[c]=[n]:"bitstring"==c?(console.log("bitstring"),r._parent[c]=""):r._parent[c]=s(n)}catch(e){}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();a.addEventListener("load",function(){var e=Object(h.a)(j.a.mark((function e(t){var a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={compact:!0,trim:!0,ignoreDeclaration:!0,ignoreInstruction:!0,ignoreAttributes:!0,ignoreComment:!0,ignoreCdata:!0,ignoreDoctype:!0,textFn:o},e.next=3,xe.a.xml2js(t.target.result,a);case 3:return s=e.sent,console.log("Result.content"),e.next=7,r((function(e){return s.content}));case 7:return e.next=9,r((function(e){for(var t in e)e[t].bitstring&&(console.log(e[t].bitstring),e[t].bitstring=" ")}));case 9:Se=s.content,F(n.name);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.readAsText(n),i(0)}function s(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}}(e.target)}})}),Object(V.jsx)("div",{children:Object(V.jsxs)(m.a,{variant:"primary",disabled:c>0,onClick:function(){var e={content:n},t=xe.a.json2xml(e,we),r=new Blob([t],{type:"text/xml;charset=utf-8"});Object(me.saveAs)(r,Date().toString()+"-Neurons.xmp"),W()},children:[Object(V.jsx)(N.a,{})," ","Save"]})}),Object(V.jsx)("div",{children:Object(V.jsxs)(m.a,{variant:"primary",onClick:function(){return Ne(!0)},children:[Object(V.jsx)(E.a,{})," ","Choice History"]})})]}),Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{style:{textAlign:"center"},children:Object(V.jsx)("h1",{style:{fontWeight:"700"},className:"text-primary",children:"WebSnapse"})}),Object(V.jsxs)(w.a,{children:[Object(V.jsx)(k.a,{children:Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{style:{backgroundColor:"#778beb",color:"white",borderRadius:"10px",padding:"0.5em"},children:[Object(V.jsx)(R.a,{color:"white",size:30})," ",Object(V.jsx)("strong",{children:"Time:"})," ",0==c?"Start playing!":c]}),Object(V.jsx)(y.a,{children:Object(V.jsx)(y.a.Group,{id:"formGridCheckbox",children:Object(V.jsxs)(w.a,{children:[Object(V.jsx)(k.a,{sm:5,children:Object(V.jsx)(y.a.Check,{type:"checkbox",label:"Pseudorandom",defaultChecked:A,onChange:function(){H(!A)}})}),Object(V.jsx)(k.a,{sm:1,style:{textAlign:"left"},children:Object(V.jsx)(S.a,{placement:"right",delay:{show:250,hide:400},overlay:function(e){return Object(V.jsx)(O.a,Object(l.a)(Object(l.a)({id:"button-tooltip"},e),{},{children:"Pseudorandom will allow the system to decide which rule will be executed. Unchecking it will let you decide."}))},children:Object(V.jsx)(M.a,{})})})]})})})]})}),Object(V.jsx)(k.a,{children:Object(V.jsxs)("div",{className:"snapse-controls",style:{textAlign:"center"},children:[Object(V.jsx)(m.a,{variant:"link",onClick:dt,children:Object(V.jsx)(I.a,{})})," ",Object(V.jsxs)("div",{style:{display:"inline-block"},children:[Object(V.jsx)(Ee,{isPlaying:Le},Xe),Object(V.jsx)(m.a,{size:"lg",className:"snapse-controls-play",onClick:function(){Pe?alert("Simulation has ended."):Ae((function(e){return!e}))},children:Le?Object(V.jsx)(_.a,{}):Object(V.jsx)(D.a,{})})]})," "," ",Object(V.jsx)(m.a,{variant:"link",onClick:function(){return ut()},children:Object(V.jsx)(T.a,{})})," "]})}),Object(V.jsxs)(k.a,{style:{textAlign:"right"},children:[Object(V.jsx)(m.a,{variant:"danger",onClick:at,children:"Restart"})," "]})]})]}),Object(V.jsx)("hr",{}),Object(V.jsx)(Q,{neurons:n,onEdgeCreate:function(e,t,n){Ze(e.id(),t.id()),n.remove()},handleChangePosition:$e}),Object(V.jsx)(pe,{time:c,showChoiceHistoryModal:ke,handleCloseHoiceHistoryModal:function(){return Ne(!1)}}),Object(V.jsx)(ue,{showNewNodeModal:Y,handleCloseModal:function(){return $(!1)},handleNewNode:function(e){return et.apply(this,arguments)},handleError:Ye}),Object(V.jsx)(de,{showEditModal:he,handleCloseEditModal:function(){return be(!1)},handleEditNode:function(e,t,n){return nt.apply(this,arguments)},handleError:Ye,neurons:n}),Object(V.jsx)(je,{showDeleteModal:Ie,handleCloseDeleteModal:function(){return _e(!1)},handleDeleteNode:function(e){return rt.apply(this,arguments)},handleError:Ye,neurons:n}),Object(V.jsx)(ie,{showChooseRuleModal:oe,handleCloseChooseRuleModal:Ve,rules:ct,handleChosenRules:function(e){Ve(),r((function(t){for(var n in t)for(var r in e)if(n==r){var a=ee(e[r]),o=Object(b.a)(a,6),s=(o[0],o[1],o[2],o[3],o[4],o[5]);t[n].delay=s,t[n].currentRule=e[r],t[n].chosenRule=e[r]}})),Ae(!0)}}),q]})})})})},Me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,204)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),o(e),s(e)}))},Ie=n(104),_e=n.n(Ie),De=n(105),Te=n.n(De);F.a.use(_e.a),F.a.use(Te.a),c.a.render(Object(V.jsx)(o.a.StrictMode,{children:Object(V.jsx)(Re,{})}),document.getElementById("root")),Me()}},[[180,1,2]]]);
//# sourceMappingURL=main.d1c7a5d8.chunk.js.map